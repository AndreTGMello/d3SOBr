<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="lib/jquery/jquery.min.js"></script>
	<script src="lib/d3/d3.v3.min.js"></script>
	<script src="d3sparql.js"></script>
	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css"/>
	<style>
	.bar:hover {
		fill: brown;
	}
	</style>
	<style>
    text {
      pointer-events: none;
    }
    .children rect.parent,
    .grandparent rect {
      cursor: pointer;
    }
    .grandparent:hover rect {
      opacity: 0.8;
    }
    .children:hover rect.child {
      opacity: 0.2;
    }
    </style>
	<script>
	function exec() {
			d3sparql.debug = true;
			var endpoint = "http://togostanza.org/sparql";
			var sparql = "PREFIX up: <http://purl.uniprot.org/core/> PREFIX ec: <http://purl.uniprot.org/enzyme/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT  ?root        ?parent         ?enzyme        (COUNT(?protein) AS ?value) FROM <http://togogenome.org/graph/uniprot> WHERE {        VALUES ?root { ec:1.-.-.- }        ?root skos:narrowerTransitive* ?enzyme .        ?parent skos:narrowerTransitive ?enzyme .        ?protein up:enzyme ?enzyme . }GROUP BY ?root ?parent ?enzyme ORDER BY ?enzyme"
			d3sparql.query(endpoint, sparql, render);
		}
		function render(json) {
			var config = {
				"width": 1000,
				"height": 600,
				"selector": "#result"
			}
			d3sparql.treemapzoom(json, config);
		}
	</script>
</head>
<body>
	<div id="query" style="margin: 10px">
		<center><h1>Visualização de Orçamentos do Brasil</h1></center>
		<p>Escolha uma forma de visualização dos dados
			<select id="selectTipoVisualizacao">
				<option>barchart</option>
				<option>circlepack</option>
				<option>coordmap</option>
				<option>dendrogram</option>
				<option>forcegraph</option>
				<option>htmlhash</option>
				<option>htmltable</option>
				<option>namedmap</option>
				<option>piechart</option>
				<option>roundtree</option>
				<option>sankey</option>
				<option>scatterplot</option>
				<option>sunburst</option>
				<option>treemap</option>
				<option>treemapzoom</option>
			</select></p>

			<p>Escolha um estado:
				<select id="selectEstado">
					<option>
						Todos
					</option>
					<option>
						SP
					</option>
				</select>
			</p>
<p>Escolha um ano:
				<select id="selectAno">
					<option>
						2010
					</option>
					<option>
						2015
					</option>
				</select>
			</p>
			<p>Escolha um município:
				<select id="selectMunicipio">
					<option>
						São Paulo
					</option>
				</select>
			</p>

			<button onclick="exec()"><i class="icon-th"></i>ENVIAR DADOS</button>
		</div>
		<div id="result"></div>
	</body>
	</html>
